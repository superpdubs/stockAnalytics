{% extends "base.html" %}

{% block title %}{{ tickerInfo.companyDetails.symbol }} {{ "$%.2f"|format(tickerInfo.currentPrice)}} - {{ tickerInfo.companyDetails.companyName }}{% endblock %}

{% block header %}{% include 'header.html' %}
{% endblock %}

{% block body_contents %}
    <div class=column>
      <div class="stock-info">
        <span class="company">{{ tickerInfo.companyDetails.companyName }}</span>
        <span class="symbol">{{ tickerInfo.companyDetails.symbol }}</span>
        <span class="exchange">{{ tickerInfo.companyDetails.exchange }}</span>
        <span class="value">{{ "%.2f"|format(tickerInfo.currentPrice)}}</span>
        <span class=currency>USD</span>
        <span class="source"><a href="https://iextrading.com/developer">IEX Real-Time Price</a></span>
        <div>
          <span class="opening-value">Opened: {{ "%.2f"|format(tickerInfo.open.price)}}</span>
{% if tickerInfo.live == true %}
          <span> - Currently live and trading</span>
{% else %}
          <span>Closed: {{ "$%.2f"|format(tickerInfo.close.price)}}</span>
{% endif %}
        </div>
      </div>
      <div class=graph>
        <img src="/static/graph/{{ graph }}.png">
      </div>
    </div>
    <div class="column feed">
      <div class=graph>
{% for tweet in twitter %}
        <div class="tweet">
          <div>
            <a href="{{ tweet.user.url }}" target="_blank" >
              <img src="{{ tweet.user.profile_image_url_https }}"/>
              <span>{{ tweet.user.name }}</span>
              <span>@{{ tweet.user.screen_name }}</span>
            </a>
            <span>{{ tweet.created_at }}</span>
          </div>
          <div>
            <span>{{ tweet.text }}</span>
          </div>
          <div>
            <span>Favourited: {{ tweet.favorite_count }}</span>
            <span>Retweeted: {{ tweet.retweet_count }}</span>
            <a href="{{ tweet.urls }}">Permalink</a>
          </div>
        </div>
        <!-- <p>{{ tweet.user.location }}</p> -->
        <!-- <p>{{ tweet.user.description }}</p> -->
{% endfor %}
      </div>
      <div class=graph>
{% for newsItem in tickerNews %}
        <div class="article">
          <h2><a href="{{ newsItem.url }}" >{{ newsItem.headline }}</a></h2>
          <span class="source">{{ newsItem.source }} <time datetime="{{ newsItem.datetime }}">{{ newsItem.datetime }}</time></span>
          <p>{{ newsItem.summary }}</p>
        </div>
{% endfor %}
      </div>
    </div>{% endblock %}
